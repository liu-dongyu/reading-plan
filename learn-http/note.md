## 第一章：了解 web 及网络基础

HTTP 协议：超文本传输协议，用于从 web 客户端传递数据到服务端  
TCP/IP 协议族: TCP/IP 是互联网相关的各类协议的总称，包括 HTTP 协议、IP 协议、TCP 协议等

TCP/IP 分为应用层、传输层、网络层、链路层（加强记忆口诀：应该传递网络链接），分层的好处在于未来维护改动成本相对小以及 web 应用只需要考虑分派任务的对象，不需要管对方在哪以及怎么传递  
应用层：应用层向用户提供通用的应用服务，例如 FTP 文件传输、DNS 域名解析、HTTP 协议等  
传输层：提供 TCP 和 UDP 协议，用于处于网络中的两个计算机数据通信  
网络层：规定了通过什么路径将数据包传递给对方  
链路层：用来处理链接网络的硬件部分，例如网卡等

**从输入 url 开始，web 页面是如何呈现的？**  
从应用层开始，通过 DNS 服务解析域名得到 IP 地址，通过 HTTP 协议生成针对目标 web 服务器的 HTTP 请求报文，传输层使用 TCP 协议，接收应用层传递的数据，TCP 协议使用三次握手过程来保证了数据能精确的传递给目标方，且为了传输方便，传输层会对 HTTP 请求报文进行分割，打上序号标记以及端口号后转发给网络层，在网络层中，IP 协议通过 ARP 协议从 IP 地址得出 MAC 地址，将该 MAC 地址在传递数据中加上作为通信地址后传递给链路层。接收方则从链路层开始，逐步拆解数据包的得出 HTTP 请求报文，也是通过 TCP/IP 协议进行数据回传。

**TCP 协议三次握手过程**  
三次握手过程是为了保证数据能准确的传递给目标方，分别是 1 发送方首先发送一个带有 SYN 标识的数据包给对方，2 接受方收到后回传一个带有 syn/ack 标识的数据包以表示接受成功，3 发送端再回传一个带有 ACK 标识的数据包表示代表握手结束

**额外知识，客户端得到资源后是如何渲染到页面上？**  
浏览器解析 html/xvg/xml 文件形成 DOM tree，在解析过程中，一旦遇到 script 标签，会停止解析，直到对应 js 加载以及执行完毕，这就是为什么我们一般将 JS 文件放在 body 标签末尾的原因，除此之外，给 script 添加`defer`或`async`能实现加载过程不阻塞 DOM tree 构建，区别为`defer`会在 DOM tree 构建后，`DOMContentLoaded`事件触发前执行，而`async`则会在加载完成之后立即执行，有可能阻塞 DOM tree 构建。在构建 DOM tree 的过程中，浏览器会同时解析 css 文件形成 css rule tree，值得注意的是，script 同样会阻塞 css rule tree，的构建，都构建完成之后，DOM tree 会和 css rule tree 结合形成 rendering tree，rendering tree 和 DOM tree 未必一致，例如`display: none`的元素就不会出现，后再由 GUI 渲染到页面上。
